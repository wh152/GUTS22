<!DOCTYPE html>
<!--
Cookie demo for CS2003
Saleem Bhatti, Sep 2018
-->

<html>

<head>
<meta charset="utf-8" />
<title>Browser Counter - cookies</title>
</head>

<body>

<h1>Browser Counter - cookies</h1>

<br />

<script src="cookie.js"></script>
<script>
  let expdate = new Date();
  let user = "blobby"; // This could have come from previous user input.
  let visits;

  // Set expiry date to a year from now.
  expdate.setTime(expdate.getTime() + (24 * 60 * 60 * 1000 * 365));

  if (!(visits = getCookie("visits"))) { visits = 0; }

  ++visits;
  setCookie("visits", visits, expdate, "/", "st-andrews.ac.uk", false);
  setCookie("user", user, expdate, "/", "st-andrews.ac.uk", false);

  document.write(
    "Your browser has visited this page <b style='color: green;'>"
    + visits +
    "</b> time(s).");

  document.write("<br /><br />");
  document.write("Cookies on this page: " + document.cookie);
</script>

</body>
</html>
